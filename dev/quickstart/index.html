<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Quickstart ¬∑ HealthBase.jl</title><meta name="title" content="Quickstart ¬∑ HealthBase.jl"/><meta property="og:title" content="Quickstart ¬∑ HealthBase.jl"/><meta property="twitter:title" content="Quickstart ¬∑ HealthBase.jl"/><meta name="description" content="Documentation for HealthBase.jl."/><meta property="og:description" content="Documentation for HealthBase.jl."/><meta property="twitter:description" content="Documentation for HealthBase.jl."/><meta property="og:url" content="https://JuliaHealth.github.io/HealthBase.jl/quickstart/"/><meta property="twitter:url" content="https://JuliaHealth.github.io/HealthBase.jl/quickstart/"/><link rel="canonical" href="https://JuliaHealth.github.io/HealthBase.jl/quickstart/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">HealthBase.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Quickstart</a><ul class="internal"><li><a class="tocitem" href="#Getting-Started"><span>Getting Started</span></a></li><li><a class="tocitem" href="#1.-Load-Packages"><span>1. Load Packages</span></a></li><li><a class="tocitem" href="#2.-Create-Example-DataFrames"><span>2. Create Example DataFrames</span></a></li><li><a class="tocitem" href="#3.-Preprocessing-Pipeline"><span>3. Preprocessing Pipeline</span></a></li></ul></li><li><span class="tocitem">Workflow Guides</span><ul><li><a class="tocitem" href="../observational_template_workflow/">Observational Template Workflow</a></li><li><a class="tocitem" href="../OMOPCDMWorkflow/">OMOP CDM Workflow</a></li></ul></li><li><span class="tocitem">HealthTable System</span><ul><li><a class="tocitem" href="../HealthTableGeneral/">HealthTable: General Tables.jl Interface</a></li><li><a class="tocitem" href="../HealthTableOMOPCDM/">HealthTable: OMOP CDM Support</a></li><li><a class="tocitem" href="../HealthTablePreprocessing/">HealthTable: Preprocessing Functions</a></li></ul></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Quickstart</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Quickstart</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaHealth/HealthBase.jl/blob/master/docs/src/quickstart.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid">ÔÅÑ</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Quickstart"><a class="docs-heading-anchor" href="#Quickstart">Quickstart</a><a id="Quickstart-1"></a><a class="docs-heading-anchor-permalink" href="#Quickstart" title="Permalink"></a></h1><p>Welcome to the <strong>Quickstart</strong> guide for <a href="https://github.com/JuliaHealth/HealthBase.jl"><code>HealthBase.jl</code></a>!   This guide walks you through setting up your Julia environment, creating example OMOP CDM data, validating it, and applying preprocessing steps using the <code>HealthTable</code> system.</p><h2 id="Getting-Started"><a class="docs-heading-anchor" href="#Getting-Started">Getting Started</a><a id="Getting-Started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-Started" title="Permalink"></a></h2><h3 id="Launch-Julia-and-Enter-Your-Project-Environment"><a class="docs-heading-anchor" href="#Launch-Julia-and-Enter-Your-Project-Environment">Launch Julia and Enter Your Project Environment</a><a id="Launch-Julia-and-Enter-Your-Project-Environment-1"></a><a class="docs-heading-anchor-permalink" href="#Launch-Julia-and-Enter-Your-Project-Environment" title="Permalink"></a></h3><p>To get started:</p><ol><li>Open your terminal or Julia REPL.</li><li>Navigate to your project folder (where <code>Project.toml</code> is located):</li></ol><pre><code class="language-sh hljs">cd path/to/your/project</code></pre><ol><li>Activate the project:</li></ol><pre><code class="language-julia hljs">julia --project=.</code></pre><ol><li>(Optional for docs) For working on documentation:</li></ol><pre><code class="language-sh hljs">julia --project=docs</code></pre><h2 id="1.-Load-Packages"><a class="docs-heading-anchor" href="#1.-Load-Packages">1. Load Packages</a><a id="1.-Load-Packages-1"></a><a class="docs-heading-anchor-permalink" href="#1.-Load-Packages" title="Permalink"></a></h2><p>Before loading <code>HealthBase</code>, you must first load some <strong>trigger packages</strong>.   These packages enable HealthBase&#39;s extensions, which power important features like type validation and concept mapping.</p><blockquote><p>‚ö†Ô∏è <strong>Important:</strong> Load the following packages <strong>before</strong> <code>using HealthBase</code>.   Otherwise, some functions may not be available due to missing extensions.</p></blockquote><pre><code class="language-julia hljs"># First, load the trigger packages
using DataFrames, OMOPCommonDataModel, InlineStrings, Serialization, Dates, FeatureTransforms, DBInterface, DuckDB

# Then, load HealthBase
using HealthBase</code></pre><h2 id="2.-Create-Example-DataFrames"><a class="docs-heading-anchor" href="#2.-Create-Example-DataFrames">2. Create Example DataFrames</a><a id="2.-Create-Example-DataFrames-1"></a><a class="docs-heading-anchor-permalink" href="#2.-Create-Example-DataFrames" title="Permalink"></a></h2><p>We&#39;ll create two <code>DataFrame</code>s:</p><ul><li><code>good_df</code> - a minimal, valid slice of the OMOP <em>person</em> table.</li><li><code>wrong_df</code> - intentionally invalid (wrong types &amp; extra column) so you can see the constructor‚Äôs validation in action.</li></ul><pre><code class="language-julia hljs">good_df = DataFrame(
    person_id = 1:6,
    gender_concept_id = [8507, 8507, 8532, 8532, 8507, 8532],
    year_of_birth = [1980, 1995, 1990, 1975, 1988, 2001],
    race_concept_id = [8527, 8515, 8527, 8516, 8527, 8516]
)

# Invalid DataFrame to test validation
wrong_df = DataFrame(
    person_id = [&quot;1&quot;, &quot;2&quot;],            # Should be Int64
    gender_concept_id = [8507, 8532],
    year_of_birth = [1990, 1985],
    race_concept_id = [8527, 8516],
    extra_col = [true, false],         # Extra column not in the OMOP schema
)

ht = HealthTable(good_df; omop_cdm_version=&quot;v5.4.1&quot;)

# OMOP CDM version metadata
metadata(ht.source, &quot;omop_cdm_version&quot;)

# Will give column-specific metadata
colmetadata(ht.source, :gender_concept_id)

# This will throw an error (strict enforcement)
ht = HealthTable(wrong_df; omop_cdm_version=&quot;v5.4.1&quot;, disable_type_enforcement = false)

# If you want to *load anyway* and just receive warnings, disable type enforcement:
ht_relaxed = HealthTable(wrong_df; omop_cdm_version=&quot;v5.4.1&quot;, disable_type_enforcement = true)</code></pre><h2 id="3.-Preprocessing-Pipeline"><a class="docs-heading-anchor" href="#3.-Preprocessing-Pipeline">3. Preprocessing Pipeline</a><a id="3.-Preprocessing-Pipeline-1"></a><a class="docs-heading-anchor-permalink" href="#3.-Preprocessing-Pipeline" title="Permalink"></a></h2><p>Now, we&#39;ll apply a series of transformations to clean and prepare the data.</p><h3 id="Mapping-Concepts"><a class="docs-heading-anchor" href="#Mapping-Concepts">Mapping Concepts</a><a id="Mapping-Concepts-1"></a><a class="docs-heading-anchor-permalink" href="#Mapping-Concepts" title="Permalink"></a></h3><p>Convert concept codes (e.g., gender ID) into readable or binary columns using a DuckDB connection.</p><pre><code class="language-julia hljs">conn = DBInterface.connect(DuckDB.DB, &quot;synthea_1M_3YR.duckdb&quot;)

# Single column, auto-suffixed column name (gender_concept_id_mapped)
ht_mapped = map_concepts(ht, :gender_concept_id, conn; schema = &quot;dbt_synthea_dev&quot;)

# Multiple columns, custom new column names
ht_mapped2 = map_concepts(ht, [:gender_concept_id, :race_concept_id], conn; new_cols = [&quot;gender&quot;, &quot;race&quot;], schema = &quot;dbt_synthea_dev&quot;, drop_original=true)

# In-place variant
map_concepts!(ht, [:gender_concept_id], conn; schema = &quot;dbt_synthea_dev&quot;)</code></pre><h3 id="Manual-Concept-Mapping-(Without-DB)"><a class="docs-heading-anchor" href="#Manual-Concept-Mapping-(Without-DB)">Manual Concept Mapping (Without DB)</a><a id="Manual-Concept-Mapping-(Without-DB)-1"></a><a class="docs-heading-anchor-permalink" href="#Manual-Concept-Mapping-(Without-DB)" title="Permalink"></a></h3><p>Sometimes, you may want to map concept IDs using a custom dictionary instead of querying the database.</p><pre><code class="language-julia hljs"># Define custom mapping manually
custom_map = Dict(8507 =&gt; &quot;Male&quot;, 8532 =&gt; &quot;Female&quot;)

# Option 1: Add a new column using `Base.map`
ht.source.gender_label = map(x -&gt; get(custom_map, x, &quot;Unknown&quot;), ht.source.gender_concept_id)

# Option 2: Use `Base.map!` with a new destination vector
gender_labels = Vector{String}(undef, length(ht.source.gender_concept_id))
map!(x -&gt; get(custom_map, x, &quot;Unknown&quot;), gender_labels, ht.source.gender_concept_id)
ht.source.gender_label = gender_labels</code></pre><h3 id="Compress-sparse-categories"><a class="docs-heading-anchor" href="#Compress-sparse-categories">Compress sparse categories</a><a id="Compress-sparse-categories-1"></a><a class="docs-heading-anchor-permalink" href="#Compress-sparse-categories" title="Permalink"></a></h3><p>Group rare values into an &quot;Other&quot; category so they don‚Äôt overwhelm your model.</p><pre><code class="language-julia hljs">ht_compressed = apply_vocabulary_compression(ht_mapped; cols = [:race_concept_id], min_freq = 2, other_label = &quot;Other&quot;)</code></pre><h3 id="One-hot-encode-categorical-columns"><a class="docs-heading-anchor" href="#One-hot-encode-categorical-columns">One-hot encode categorical columns</a><a id="One-hot-encode-categorical-columns-1"></a><a class="docs-heading-anchor-permalink" href="#One-hot-encode-categorical-columns" title="Permalink"></a></h3><p>Convert categorical codes into binary indicator columns (true/false).</p><pre><code class="language-julia hljs">ht_ohe = one_hot_encode(ht_compressed; cols=[:gender_concept_id, :race_concept_id])</code></pre><h3 id="For-Developers:-Interactive-Use-in-the-REPL"><a class="docs-heading-anchor" href="#For-Developers:-Interactive-Use-in-the-REPL">For Developers: Interactive Use in the REPL</a><a id="For-Developers:-Interactive-Use-in-the-REPL-1"></a><a class="docs-heading-anchor-permalink" href="#For-Developers:-Interactive-Use-in-the-REPL" title="Permalink"></a></h3><p>When working interactively in the REPL during development:</p><ul><li>Always load the <strong>trigger packages first</strong></li><li>Then load <code>HealthBase</code></li><li>Only after that, use extension functions like <code>one_hot_encode</code>, <code>map_concepts</code>, etc.</li></ul><pre><code class="language-julia hljs"># Correct load order for extensions to work:
using DataFrames, OMOPCommonDataModel, InlineStrings, Serialization, Dates, FeatureTransforms, DBInterface, DuckDB
using HealthBase

# Now this will work:
# ht_ohe = one_hot_encode(ht; cols=[:gender_concept_id])</code></pre><p>Happy experimenting with <code>HealthBase.jl</code>! üéâ   Feel free to explore more advanced workflows in the other guide sections.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">¬´ Home</a><a class="docs-footer-nextpage" href="../observational_template_workflow/">Observational Template Workflow ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 27 August 2025 05:56">Wednesday 27 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
