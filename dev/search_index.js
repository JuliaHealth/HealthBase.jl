var documenterSearchIndex = {"docs":
[{"location":"api/#API","page":"API","title":"API","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"","category":"page"},{"location":"observational_template_workflow/#Observational-Health-Study","page":"Observational Health Study","title":"Observational Health Study","text":"","category":"section"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"This workflow guide demonstrates how to initialize and run an observational health study using HealthBase.jl.\nBy the end of this tutorial, you will be able to:","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"Initialize a new observational health study project using HealthBase.jl\nDownload phenotype definitions and concept sets from OHDSI ATLAS via WebAPI\nTranslate OHDSI cohort definitions to SQL using OHDSICohortExpressions.jl\nExecute translated SQL against an OMOP CDM v5.4 database using FunSQL.jl","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"","category":"page"},{"location":"observational_template_workflow/#1.-Setup-and-Study-Initialization","page":"Observational Health Study","title":"1. Setup and Study Initialization","text":"","category":"section"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"First, ensure that the required packages are installed in your global Julia environment:","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"import Pkg\nPkg.add(\n  [\n    \"DrWatson\",\n    \"HealthBase\"\n  ]\n)","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"Note: The global environment is the default Julia package environment shared across projects. To learn more about environments, see the Pkg documentation.","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"Then, load the packages:","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"using DrWatson\nusing HealthBase\n\nimport HealthBase:\n  cohortsdir","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"Initialize a new observational health study:","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"julia> initialize_study(\"sample_study\", \"Jenna Reps\"; template = :observational)","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"This command creates a new directory called sample_study using the :observational template. Then, it activates a new Julia environment named sample_study.","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"After initializing the study directory and Julia environment, install the remaining required packages:","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"Pkg.add(\n  [\n    \"DataFrames\",\n    \"Downloads\",\n    \"DBInterface\",\n    \"DuckDB\",\n    \"FunSQL\",\n    \"OHDSIAPI\",\n    \"OHDSICohortExpressions\"\n  ]\n)","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"Now, load and import all necessary packages and functions:","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"using DataFrames\nusing Downloads\n\nimport DBInterface:\n  connect,\n  execute\nimport DuckDB:\n  DB\nimport FunSQL:\n  reflect,\n  render\nimport OHDSIAPI:\n  download_cohort_definition,\n  download_concept_set\nimport OHDSICohortExpressions:\n  translate","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"","category":"page"},{"location":"observational_template_workflow/#2.-Download-OHDSI-Cohort-Definitions","page":"Observational Health Study","title":"2. Download OHDSI Cohort Definitions","text":"","category":"section"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"OHDSIAPI.jl is a Julia interface to various OHDSI WebAPI services. We can use it to access OHDSI ATLAS, OHDSI's web-based tool for defining phenotypes and analyses.","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"Here, we can download a single cohort definition using its ATLAS ID:","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"cohort_path = download_cohort_definition(1793014; output_dir=cohortsdir())","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"Tip: To download multiple cohort definitions with more verbose output:cohort_ids = [1793014, 1792956]\ndownload_cohort_definition(cohort_ids; progress_bar=true, verbose=true)You can also download associated concept sets:download_concept_set(cohort_ids; deflate=true, output_dir=cohortsdir())","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"","category":"page"},{"location":"observational_template_workflow/#3.-Translate-Cohort-Definitions-to-SQL","page":"Observational Health Study","title":"3. Translate Cohort Definitions to SQL","text":"","category":"section"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"Now, we can use OHDSICohortExpressions.jl to convert this cohort definition into SQL.","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"cohort_expression = cohortsdir(\"1793014.json\")\n\nfun_sql = translate(\n    cohort_expression;\n    cohort_definition_id = 1\n)","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"","category":"page"},{"location":"observational_template_workflow/#4.-Download-Synthetic-Database","page":"Observational Health Study","title":"4. Download Synthetic Database","text":"","category":"section"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"For this guide, we will use a synthetic OMOP CDM v5.3 database from Eunomia. We will download it as follows:","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"# TODO: Add download URL\nurl = \"\"\ndb_path = datadir(\"exp_raw\", \"omop_cdm.db\")\nDownloads.download(url, db_path)","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"","category":"page"},{"location":"observational_template_workflow/#5.-Execute-the-Cohort-on-a-Database","page":"Observational Health Study","title":"5. Execute the Cohort on a Database","text":"","category":"section"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"Create database connection and configure dialect:","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"const CONNECTION = connect(DB, datadir(\"exp_raw\", \"omop_cdm.db\"))\nconst SCHEMA = \"\"\nconst DIALECT = :postgresql","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"Reflect database catalog and render SQL:","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"catalog = reflect(CONNECTION; schema=SCHEMA, dialect=DIALECT)\nsql = render(catalog, fun_sql)","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"Execute cohort query and insert results into cohort table:","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"execute(\n  CONNECTION,\n  \"\"\"\n  INSERT INTO cohort\n  SELECT * FROM ($sql) AS foo;\n  \"\"\"\n)","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"Query results into a DataFrame:","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"df = execute(CONNECTION, \"SELECT COUNT(*) FROM cohort;\") |> DataFrame","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"Display DataFrame:","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"println(df)","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"","category":"page"},{"location":"observational_template_workflow/#Summary","page":"Observational Health Study","title":"Summary","text":"","category":"section"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"This workflow demonstrates how to run an observational health study using tools from the JuliaHealth ecosystem:","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"Initialize a project with a standardized structure using HealthBase.jl\nDownload cohort and concept set definitions from OHDSI ATLAS using OHDSIAPI.jl\nConvert JSON cohort logic to SQL using OHDSICohortExpressions.jl\nExecute SQL queries on an OMOP CDM v5.4 database using FunSQL.jl and DuckDB","category":"page"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"","category":"page"},{"location":"observational_template_workflow/#Related-Resources","page":"Observational Health Study","title":"Related Resources","text":"","category":"section"},{"location":"observational_template_workflow/","page":"Observational Health Study","title":"Observational Health Study","text":"OHDSI Common Data Model\nATLAS Tool (Demo)\nDrWatson.jl Documentation\nHealthBase.jl GitHub\nJuliaHealth GitHub","category":"page"},{"location":"#HealthBase.jl","page":"Home","title":"HealthBase.jl","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Common namespace for functions and interfaces in the JuliaHealth ecosystem","category":"page"},{"location":"#Overview","page":"Home","title":"Overview","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"HealthBase.jl is a foundational package for interacting with the JuliaHealth ecosystem. It is designed to live within your global Julia environment.  The package supports a number of workflows and provides helper functions for JuliaHealth users.","category":"page"},{"location":"#Features","page":"Home","title":"Features","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Some notable features include:","category":"page"},{"location":"","page":"Home","title":"Home","text":"Extensible and consistent ecosystem interfaces\nTemplates for common JuliaHealth workflows\nUtilities to quickly build a research study\nInteroperability with packages across Julia community\nLightweight and high code quality","category":"page"},{"location":"#Limitations","page":"Home","title":"Limitations","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"HealthBase.jl is an interface and foundational level package that acts as a dependency for multiple JuliaHealth packages. It is designed to be as lightweight as possible. As a result, all provided functions that depend on other packages should live in extensions.","category":"page"}]
}
